{
  "hooks": {
    "post-tool-use": [
      {
        "name": "test-after-code-changes",
        "matcher": {
          "agent": "coder",
          "tool": "MultiEdit"
        },
        "command": "pnpm test -- --passWithNoTests --silent || echo 'Tests failed - review before proceeding'",
        "timeout": 30000
      },
      {
        "name": "lint-after-coder",
        "matcher": {
          "agent": "coder",
          "tool": "Edit|MultiEdit|Write"
        },
        "command": "pnpm run lint --silent || echo 'Linting issues detected'",
        "timeout": 10000
      }
    ],
    "pre-tool-use": [
      {
        "name": "security-scan-before-review",
        "matcher": {
          "agent": "reviewer"
        },
        "command": "pnpm audit --audit-level moderate || echo 'Security vulnerabilities detected'",
        "timeout": 20000
      },
      {
        "name": "dependency-scan",
        "matcher": {
          "agent": "security-auditor"
        },
        "command": "pnpm audit --format json | jq '.advisories | length' || echo '0'",
        "timeout": 15000
      },
      {
        "name": "secret-scan",
        "matcher": {
          "agent": "security-auditor"
        },
        "command": "grep -r --exclude-dir=node_modules --exclude-dir=.git -E '(api[_-]?key|secret|token|password)\\s*[=:]\\s*[\"\\'][^\"\\'\n]{10,}[\"\\']' . || echo 'No secrets detected'",
        "timeout": 10000
      }
    ]
  }
}
